<!doctype html>
<html lang="it">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/svgs/solid/film.svg">

    <title>CineSearch</title>

    <link href="https://vjs.zencdn.net/8.16.1/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/8.16.1/video.min.js"></script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/videojs-hls-quality-selector@2.0.0/dist/videojs-hls-quality-selector.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/videojs-hls-quality-selector@2.0.0/dist/videojs-hls-quality-selector.min.js"></script>
    
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <header id="header">
<div class="logo">
  <i class="fas fa-film"></i>
  <span>CineSearch</span>
</div>
      <div class="header-controls">
        <div class="cors-selector">
          <label class="cors-label" for="cors-select">ğŸŒ CORS Proxy</label>
          <select id="cors-select"></select>
        </div>
        <div class="search-container">
          <input
            type="text"
            id="search"
            placeholder="ğŸ” Cerca film, serie TV..."
          />
        </div>
      </div>
      <div class="preferiti-counter" onclick="showPreferiti()" style="cursor: pointer;">
        <span class="fav-icon">â­</span>
        <span id="preferiti-count">0</span>
      </div>
    </header>
    <main>
      <div id="home">
        <section class="hero">
          <div class="hero-content">
            <h1>Benvenuto su CineSearch</h1>
            <p>La tua piattaforma per film e serie TV</p>
            
<div class="navigation-buttons" style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
  <button class="nav-btn remote-friendly" onclick="showAllMovies()">ğŸ¬ Tutti i Film</button>
  <button class="nav-btn remote-friendly" onclick="showAllTV()">ğŸ“º Tutte le Serie TV</button>
  <button class="nav-btn remote-friendly" onclick="showCategories()">ğŸ­ Categorie</button>
  <button class="nav-btn remote-friendly" onclick="showPreferiti()">â­ Preferiti</button>
</div>
          </div>
          <script>
// Feedback visivo per telecomando
document.addEventListener('keydown', function(e) {
  if (e.key.startsWith('Arrow') || e.key === 'Enter' || e.key === ' ') {
    const feedback = document.createElement('div');
    feedback.className = 'key-press-feedback';
    feedback.textContent = e.key.replace('Arrow', '');
    document.body.appendChild(feedback);
    
    setTimeout(() => feedback.remove(), 1000);
  }
});
</script>
        </section>

        <section id="continua-visione" style="display: none;">
          <h2>â–¶ï¸ Continua visione</h2>
          <div class="carousel-wrapper">
            <button class="arrow left" data-target="continua-carousel">â—€</button>
            <div class="carousel-container">
              <div class="carousel" id="continua-carousel"></div>
            </div>
            <button class="arrow right" data-target="continua-carousel">â–¶</button>
          </div>
        </section>

        <section id="preferiti" style="display: none;">
          <h2>â­ Preferiti</h2>
          <div class="carousel-wrapper">
            <button class="arrow left" data-target="preferiti-carousel">â—€</button>
            <div class="carousel-container">
              <div class="carousel" id="preferiti-carousel"></div>
            </div>
            <button class="arrow right" data-target="preferiti-carousel">â–¶</button>
          </div>
        </section>

        <section id="trending">
          <h2>ğŸ”¥ Trending</h2>
          <div class="carousel-wrapper">
            <button class="arrow left" data-target="trending-carousel">â—€</button>
            <div class="carousel-container">
              <div class="carousel" id="trending-carousel"></div>
            </div>
            <button class="arrow right" data-target="trending-carousel">â–¶</button>
          </div>
        </section>

        <section id="nowPlaying">
          <h2>ğŸ¬ Ultimi Film</h2>
          <div class="carousel-wrapper">
            <button class="arrow left" data-target="nowPlaying-carousel">â—€</button>
            <div class="carousel-container">
              <div class="carousel" id="nowPlaying-carousel"></div>
            </div>
            <button class="arrow right" data-target="nowPlaying-carousel">â–¶</button>
          </div>
        </section>

        <section id="popularMovies">
          <h2>â­ Film Popolari</h2>
          <div class="carousel-wrapper">
            <button class="arrow left" data-target="popularMovies-carousel">â—€</button>
            <div class="carousel-container">
              <div class="carousel" id="popularMovies-carousel"></div>
            </div>
            <button class="arrow right" data-target="popularMovies-carousel">â–¶</button>
          </div>
        </section>

        <section id="onTheAir">
          <h2>ğŸ“º Ultime Serie</h2>
          <div class="carousel-wrapper">
            <button class="arrow left" data-target="onTheAir-carousel">â—€</button>
            <div class="carousel-container">
              <div class="carousel" id="onTheAir-carousel"></div>
            </div>
            <button class="arrow right" data-target="onTheAir-carousel">â–¶</button>
          </div>
        </section>

        <section id="popularTV">
          <h2>ğŸ† Serie Popolari</h2>
          <div class="carousel-wrapper">
            <button class="arrow left" data-target="popularTV-carousel">â—€</button>
            <div class="carousel-container">
              <div class="carousel" id="popularTV-carousel"></div>
            </div>
            <button class="arrow right" data-target="popularTV-carousel">â–¶</button>
          </div>
        </section>
      </div>

      <!-- RISULTATI RICERCA - Modificato per usare griglia verticale -->
      <section id="results" style="display: none;">
        <div class="grid-header">
          <button class="back-to-home" onclick="goBackToHome()" style="background: #2a09e5; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 1rem; cursor: pointer;">
            â† Torna alla Home
          </button>
          <h2 id="results-title">Risultati ricerca</h2>
        </div>
        <div class="availability-check" id="search-checking" style="margin: 0 4% 1rem;"></div>
        <div class="vertical-grid" id="search-grid"></div>
        <div class="no-results" id="search-no-results" style="display: none; grid-column: 1 / -1; text-align: center; padding: 3rem; margin: 0 4%;">
          Nessun risultato disponibile trovato
        </div>
      </section>

      <div id="player">
        <div class="player-header">
          <button class="back-btn" onclick="goBack()">â† Torna indietro</button>
        </div>

        <div class="player-info" id="player-info">
          <h1 id="player-title"></h1>
          <div class="meta" id="player-meta"></div>
          <div class="overview" id="player-overview"></div>
        </div>

        <div class="player-content">
          <div class="video-container">
            <div
              id="episode-warning"
              class="select-episode-warning"
              style="display: none"
            >
              <div class="icon">ğŸ“º</div>
              <h3>Seleziona un episodio</h3>
              <p>
                Scegli una stagione e un episodio dalla lista a destra per
                iniziare la riproduzione
              </p>
            </div>

            <video
              id="player-video"
              class="video-js vjs-theme-cinesearch vjs-big-play-centered"
              controls
              preload="auto"
              playsinline
              crossorigin="anonymous"
            ></video>

            <div
              id="loading-overlay"
              class="loading-overlay"
              style="display: none"
            >
              <div class="loading"></div>
              <div class="loading-text">Caricamento stream...</div>
            </div>
          </div>
          <div
            class="episode-selector"
            id="episode-selector"
            style="display: none"
          >
            <h3>Seleziona episodio</h3>
            <div class="season-selector">
              <label>Stagione:</label>
              <select id="season-select"></select>
            </div>
            <div class="episodes-list" id="episodes-list"></div>
          </div>
        </div>
      </div>
    </main>
<!-- TUTTI I FILM -->
<section id="allMovies" style="display: none;">
  <div class="grid-header">
    <button class="back-to-home" onclick="goBackToHome()" style="background: #2a09e5; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 1rem; cursor: pointer;">
      â† Torna alla Home
    </button>
    <h2>ğŸ¬ Tutti i Film</h2>
    <div class="grid-controls">
      <div class="year-filter" style="display: flex; align-items: center; gap: 10px;">
        <label style="color: #fff;">Filtra per anno:</label>
        <input type="number" id="movieMinYear" placeholder="Da" style="padding: 8px; width: 80px; border-radius: 4px; border: 1px solid #333;">
        <span>-</span>
        <input type="number" id="movieMaxYear" placeholder="A" style="padding: 8px; width: 80px; border-radius: 4px; border: 1px solid #333;">
        <button onclick="applyMovieYearFilter()" style="background: #2a09e5; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
          Applica
        </button>
        <button onclick="clearMovieYearFilter()" style="background: #666; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
          Reset
        </button>
      </div>
    </div>
  </div>
  <div class="pagination-info" id="movie-pagination-info" style="margin: 0 4% 1rem; color: #aaa;"></div>
  <div class="vertical-grid" id="allMovies-grid"></div>
  <div class="pagination-controls">
    <button class="page-btn prev" onclick="prevMoviePage()" disabled>â—€ Precedente</button>
    <span class="page-info" id="movie-page-info">Pagina 1</span>
    <button class="page-btn next" onclick="nextMoviePage()">Successiva â–¶</button>
  </div>
</section>

<!-- TUTTE LE SERIE TV -->
<section id="allTV" style="display: none;">
  <div class="grid-header">
    <button class="back-to-home" onclick="goBackToHome()" style="background: #2a09e5; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 1rem; cursor: pointer;">
      â† Torna alla Home
    </button>
    <h2>ğŸ“º Tutte le Serie TV</h2>
    <div class="grid-controls">
      <div class="year-filter" style="display: flex; align-items: center; gap: 10px;">
        <label style="color: #fff;">Filtra per anno:</label>
        <input type="number" id="tvMinYear" placeholder="Da" style="padding: 8px; width: 80px; border-radius: 4px; border: 1px solid #333;">
        <span>-</span>
        <input type="number" id="tvMaxYear" placeholder="A" style="padding: 8px; width: 80px; border-radius: 4px; border: 1px solid #333;">
        <button onclick="applyTVYearFilter()" style="background: #2a09e5; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
          Applica
        </button>
        <button onclick="clearTVYearFilter()" style="background: #666; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
          Reset
        </button>
      </div>
    </div>
  </div>
  <div class="pagination-info" id="tv-pagination-info" style="margin: 0 4% 1rem; color: #aaa;"></div>
  <div class="vertical-grid" id="allTV-grid"></div>
  <div class="pagination-controls">
    <button class="page-btn prev" onclick="prevTVPage()" disabled>â—€ Precedente</button>
    <span class="page-info" id="tv-page-info">Pagina 1</span>
    <button class="page-btn next" onclick="nextTVPage()">Successiva â–¶</button>
  </div>
</section>

<!-- CATEGORIE -->
<section id="categories" style="display: none;">
  <div class="grid-header">
    <button class="back-to-home" onclick="goBackToHome()" style="background: #2a09e5; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 1rem; cursor: pointer;">
      â† Torna alla Home
    </button>
    <h2>ğŸ­ Categorie</h2>
  </div>
  <div class="categories-grid" id="categories-grid"></div>
</section>

<!-- RISULTATI CATEGORIA -->
<section id="category-results" style="display: none;">
  <div class="grid-header">
    <button class="back-to-categories" onclick="goBackToCategories()" style="background: #2a09e5; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 1rem; cursor: pointer;">
      â† Torna alle Categorie
    </button>
    <h2 id="category-results-title">Categoria</h2>
    <div class="grid-controls">
      <div class="year-filter" style="display: flex; align-items: center; gap: 10px;">
        <label style="color: #fff;">Filtra per anno:</label>
        <input type="number" id="minYear" placeholder="Da" style="padding: 8px; width: 80px; border-radius: 4px; border: 1px solid #333;">
        <span>-</span>
        <input type="number" id="maxYear" placeholder="A" style="padding: 8px; width: 80px; border-radius: 4px; border: 1px solid #333;">
        <button onclick="applyYearFilter()" style="background: #2a09e5; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
          Applica
        </button>
        <button onclick="clearYearFilter()" style="background: #666; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
          Reset
        </button>
      </div>
    </div>
  </div>
  <div class="pagination-info" id="category-pagination-info" style="margin: 0 4% 1rem; color: #aaa;"></div>
  <div class="vertical-grid" id="category-grid"></div>
  <div class="pagination-controls">
    <button class="page-btn prev" onclick="prevCategoryPage()" disabled>â—€ Precedente</button>
    <span class="page-info" id="category-page-info">Pagina 1</span>
    <button class="page-btn next" onclick="nextCategoryPage()">Successiva â–¶</button>
  </div>
</section>
<section id="preferiti-section" style="display: none;">
  <h2>â­ I tuoi Preferiti</h2>
  <div class="carousel-wrapper">
    <button class="arrow left" onclick="scrollCarouselPreferiti(-1)">â—€</button>
    <div class="carousel-container">
      <div class="carousel" id="preferiti-section-carousel"></div>
    </div>
    <button class="arrow right" onclick="scrollCarouselPreferiti(1)">â–¶</button>
  </div>
  <div class="preferiti-message" id="preferiti-message" style="text-align: center; padding: 2rem; color: #888;">
    Aggiungi contenuti ai preferiti per vederli qui
  </div>
</section>
<script src="script.js?v=00"></script>
<script src="api.js?v=00"></script>
<script src="cors.js?v=00"></script>
<script src="preferiti.js?v=00"></script>
<script src="continua-visione.js?v=00"></script>
<script src="card.js?v=00"></script>
<script src="categorie.js?v=00"></script>
<script src="film-serie.js?v=00"></script>
<script src="ricerca.js?v=00"></script>
<script src="player.js?v=00"></script>
<script src="tv-player-controls.js"></script>
<script>
  // Inizializza la navigazione TV
  document.addEventListener('DOMContentLoaded', () => {
    if (detectTVMode()) {
      console.log('ğŸ“º ModalitÃ  TV attivata');
      
      // Inizializza navigazione TV
      window.tvNavigation = new TVNavigation();
      
      // Ottimizza per TV
      document.body.classList.add('tv');
      
      // Focus sulla prima card
      setTimeout(() => {
        const firstCard = document.querySelector('.card, .nav-btn');
        if (firstCard) {
          firstCard.focus();
        }
      }, 1000);
    }
  });
</script>
<footer style="text-align: center; padding: 2rem; color: #666; font-size: 0.9rem; border-top: 1px solid #333; margin-top: 3rem;">
  <p>Â© 2025 Copyright AIMODS | Forked by cinesearch</p>
</footer>
  </body>
</html>
